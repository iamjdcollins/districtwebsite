{% extends "www_slcschools_org/contentrighttoc.html" %}
{% load static mptt_tags %}

{% block title %}
  {{page.title}}
{% endblock %}

{% block precontent %}
{% endblock %}

{% block sidebar_first %}
<div class="row ">
  <div class="table-of-contents">
    <h5>Contents:</h5>
    <ul>
      {% if page.body %}
      <li><a href="#about">About</a></li>
      {% endif %}
      {% if page.building_location or page.main_phone or page.main_fax %}
      <li><a href="#contact">Contact</a></li>
      {% endif %}
      {% if request.path == '/board-of-education/policies/' %}
      {% if board_policies %}
      <li><a href="#board_policies">Board Policies ({{ board_policies|length }})</a></li>
      {% endif %}
      {% if community_policies %}
      <li><a href="#community_policies">Community Policies ({{ community_policies|length }})</a></li>
      {% endif %}
      {% if financial_policies %}
      <li><a href="#financial_policies">Financial Policies ({{ financial_policies|length }})</a></li>
      {% endif %}
      {% if general_policies %}
      <li><a href="#general_policies">General Policies ({{ general_policies|length }})</a></li>
      {% endif %}
      {% if instructional_policies %}
      <li><a href="#instructional_policies">Instructional Policies ({{ instructional_policies|length }})</a></li>
      {% endif %}
      {% if personnel_policies %}
      <li><a href="#personnel_policies">Personnel Policies ({{ personnel_policies|length }})</a></li>
      {% endif %}
      {% if student_policies %}
      <li><a href="#student_policies">Student Policies ({{ student_policies|length }})</a></li>
      {% endif %}
      {% endif %}
      {% if request.path == '/board-of-education/board-meetings/' %}
      <li><a href="#board_meetings">Board Meetings</a></li>
      {% endif %}
      {% if  page.directoryentries_boardmember_node.all or page.directoryentries_studentboardmember_node.all%}
      <li><a href="#members">Board Members</a></li>
      {% endif %}
      {% if page.mission_statement %}
      <li><a href="#mission">Mission Statement</a></li>
      {% endif %}
      {% if page.vision_statement %}
      <li><a href="#vision">Vision Statement</a></li>
      {% endif %}
      {% if page.pages_boardsubpage_node.all or page.pages_subpage_node.all %}
      <li><a href="#pages">Pages</a></li>
      <ul>
      {% for board_subpage in page.pages_boardsubpage_node.all %}
        <li><a href="{{ board_subpage.url }}" title="{{ board_subpage.title }}">{{ board_subpage.title }}</a></li>
      {% endfor %}
      {% for board_subpage in page.pages_subpage_node.all %}
        <li><a href="{{ board_subpage.url }}" title="{{ board_subpage.title }}">{{ board_subpage.title }}</a></li>
      {% endfor %}
      </ul>
      {% endif %}
    </ul>
  </div>
</div>
{% endblock %}

{% comment %}{% block breadcrumb %}
<div class="row">
  <nav class="slcschools-grey lighten-2">
    <div class="nav-wrapper">
      <div class="col s12">
        <a href="/" title="Home" class="breadcrumb">Home</a>
        {% for item in BREADCRUMB %}
        <a href="{{ item.url }}" title="{{ item.menu_title }}" class="breadcrumb">{{ item.menu_title }}</a>
        {% endfor %}
      </div>
    </div>
  </nav>
</div>
{% endblock %}{% endcomment %}

{% block content %}
{% if page.images_contentbanner_node.all %}
<div class="card">
  <div class="unslider slcschools-grey darken-1">
    <ul class="slides">
      {% for banner in page.images_contentbanner_node.all %}
      <li class="slide">
        <img src="{{banner.image_file.url}}" alt="{{banner.alttext}}" />
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endif %}
<div class="card">
  <div class="mobile-table-of-contents hide-on-med-and-up">
    <select class="browser-default z-depth-1">
      <option value="#!" disabled selected style="display:none;">Table of Contents</option>
      {% if page.body %}
      <option value="#about">About</option>
      {% endif %}
      {% if page.building_location or page.main_phone or page.main_fax %}
      <option value="#contact">Contact</option>
      {% endif %}
      {% if  page.directoryentries_boardmember_node.all or page.directoryentries_studentboardmember_node.all%}
      <option value="#members">Board Members</option>
      {% endif %}
      {% if page.mission_statement %}
      <option value="#mission">Mission Statement</option>
      {% endif %}
      {% if page.vision_statement %}
      <option value="#vision">Vision Statement</option>
      {% endif %}
      {% if board_subpages %}
      <option value="#pages">Pages</option>
      {% for board_subpage in board_subpages %}
      <option class="page" value="{{ board_subpage.url }}" title="{{ board_subpage.title }}">-- {{ board_subpage.title }}</option>
      {% endfor %}
      {% endif %}
    </select>
  </div>
  <div id="main" class="card-content">
    <h1>{{page.title}}</h1>
    {% if page.body %}
    <div class="row">
      <div id="about" class="richtext scrollspy">
        <div class="body">
          {{page.body|safe}}
        </div>
      </div>
    </div>
    {% endif %}
    {% if page.building_location or page.main_phone or page.main_fax %}
    <div class="row">
      <div id="contact" class="scrollspy">
        {% include "www_slcschools_org/contact_block.html" %}
      </div>
    </div>
    {% endif %}
    {% if request.path == '/board-of-education/policies/' %}
    {% if board_policies %}
    <div class="row">
      <div id="board_policies" class="scrollspy">
        <h2>Board Policies</h2>
        <p class="policydescription">{{ board_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in board_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% if community_policies %}
    <div class="row">
      <div id="community_policies" class="scrollspy">
        <h2>Community Policies</h2>
        <p class="policydescription">{{ community_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in community_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% if financial_policies %}
    <div class="row">
      <div id="financial_policies" class="scrollspy">
        <h2>Financial Policies</h2>
        <p class="policydescription">{{ financial_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in financial_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% if general_policies %}
    <div class="row">
      <div id="general_policies" class="scrollspy">
        <h2>General Policies</h2>
        <p class="policydescription">{{ general_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in general_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% if instructional_policies %}
    <div class="row">
      <div id="instructional_policies" class="scrollspy">
        <h2>Instructional Policies</h2>
        <p class="policydescription">{{ instructional_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in instructional_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% if personnel_policies %}
    <div class="row">
      <div id="personnel_policies" class="scrollspy">
        <h2>Personnel Policies</h2>
        <p class="policydescription">{{ personnel_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in personnel_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% if student_policies %}
    <div class="row">
      <div id="student_policies" class="scrollspy">
        <h2>Student Policies</h2>
        <p class="policydescription">{{ student_policies.0.section.description }}</p>
        <table class="board_policies mobileblock">
          <thead>
            <tr>
              <th class="policyindex">Index</th>
              <th>Policy Title</th>
              <th class="rowaction">Documents</th>
              <th class="rowaction">Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for policy in student_policies %}
            {% include "pages/board/policytable.html" %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% endif %}
    {% if request.path == '/board-of-education/board-meetings/' %}
    {% if board_meetings %}
    <div class="row">
      <div id="board_meetings" class="scrollspy">
        <form id="schoolyearfilter" class="textfieldboxes">
          <select>
            {% for year in board_meeting_years %}
            <option value="{{ year.yearend }}" {% if currentyear.short == year.yearend %}selected="selected"{% endif %}>{{ year.title }}</option>
            {% endfor %}
          </select>
        </form>
        <table class="striped highlight mobileblock">
          <thead>
            <tr>
              <th>Date</th>
              <th>Location</th>
              <th>Meeting Type</th>
              <th class="center">Agenda</th>
              <th class="center">Minutes</th>
              <th class="center">Recordings</th>
            </tr>
          </thead>
          <tbody>
        {% for meeting in board_meetings %}
        {% include "pages/board/boardmeetingtable.html" %}
        {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}
    {% endif %}
    {% if  page.directoryentries_boardmember_node.all or page.directoryentries_studentboardmember_node.all%}
    <div class="row">
      <div id="members" class="scrollspy contactcardlist">
        <h2>Board Members</h2>
        {% for member in page.directoryentries_boardmember_node.all %}
        <div class="card horizontal">
          <div class="card-image">
            {% for profilepicture in member.employee.images_profilepicture_node.all %}
            <img src="{{profilepicture.image_file.url}}" alt="{{profilepicture.alttext}}"/>
            {% empty %}
            <img src="/users/images/placeholder.jpg" alt="No Profile Picture" />
            {% endfor %}
          </div>
          <div class="card-stacked">
            <div class="card-content">
              <h5 class="contactcardname">{{ member.employee.first_name }} {{ member.employee.last_name }}</h5>
              <strong>Precinct: </strong>{{ member.precinct }}<br>
              <i class="material-icons tiny">&#xE55F;</i> {{ member.street_address }}<br>
              <i class="material-icons tiny blank"></i> {{ member.city.title }}, {{member.state.title}} {{member.zipcode.title}}<br>
               <a href="tel:+{{member.phone|slice:"0:1"}}-{{member.phone|slice:"1:4"}}-{{member.phone|slice:"4:7"}}-{{member.phone|slice:"7:11"}}">
                <i class="material-icons tiny black-text">&#xE0CD;</i> {{member.phone|slice:"1:4"}}.{{member.phone|slice:"4:7"}}.{{member.phone|slice:"7:11"}}
              </a>
              <br/><br/>
              <a href="/contact-us/inline/?pid={{ page.uuid }}&cid={{member.employee.pk}}" class="btn narrow pagefeedback">
                <span class="material-icons left" aria-hidden="true">&#xE163;</span><span aria-hidden="true">Send me a message</span>
                <span class="sr-only">Send {{ member.employee.first_name }} {{ member.employee.last_name }} a Message</span>
              </a>
            </div>
          </div>
        </div>
        {% endfor %}
        {% for member in page.directoryentries_studentboardmember_node.all %}
        <div class="card horizontal">
          <div class="card-image">
            {% for profilepicture in member.images_profilepicture_node.all %}
            <img src="{{profilepicture.image_file.url}}" alt="{{profilepicture.alttext}}"/>
            {% empty %}
            <img src="/users/images/placeholder.jpg" alt="No Profile Picture" />
            {% endfor %}
          </div>
          <div class="card-stacked">
            <div class="card-content">
              <h5 class="contactcardname">{{ member.first_name }} {{ member.last_name }}</h5>
              <strong>Student Board Member</strong><br>
              <i class="material-icons tiny">&#xE55F;</i> {{ member.building_location.street_address }}<br>
              <i class="material-icons tiny blank"></i> {{ member.building_location.location_city.title }}, {{member.building_location.location_state.title}} {{member.building_location.location_zipcode.title}}<br>
               <a href="tel:+{{member.phone|slice:"0:1"}}-{{member.phone|slice:"1:4"}}-{{member.phone|slice:"4:7"}}-{{member.phone|slice:"7:11"}}">
                <i class="material-icons tiny black-text">&#xE0CD;</i> {{member.phone|slice:"1:4"}}.{{member.phone|slice:"4:7"}}.{{member.phone|slice:"7:11"}}
              </a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
    {% if page.mission_statement %}
    <div class="row">
      <div id="mission" class="scrollspy">
        <h2>Mission Statement</h2>
        <blockquote>
          {{page.mission_statement}}
        </blockquote>
      </div>
    </div>
    {% endif %}
    {% if page.vision_statement %}
    <div class="row">
      <div id="vision" class="scrollspy">
        <h2>Vision Statement</h2>
        <blockquote>
          {{page.vision_statement}}
        </blockquote>
      </div>
    </div>
    {% endif %}
  </div>
  {{ block.super }}
</div>
{% endblock %}

{% block pagescript %}
{{ block.super }}
<script>
$(document).ready(function(){
  //$("#schoolyearfilter").change(function(event) {
  //  $year = $(this).find(":selected").val();
  //  $("#board_meetings table tbody tr").each(function(){
  //    if($(this).hasClass($year)){
  //      $(this).removeClass('hide');
  //    } else {
  //      $(this).addClass('hide');
  //   }
  //  });
  //});
  $("#schoolyearfilter").change();
});
</script>
{% endblock %}
